import{c as y,r as o,j as e,u as T,f as $,L as w}from"./index-BmR_dzGq.js";import{s as W}from"./supabaseClient--_BBSt2C.js";/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],O=y("ChevronDown",A);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],R=y("ChevronUp",I),D="_filterBar_1ktq6_1",U="_typeTabs_1ktq6_16",Z="_typeButton_1ktq6_21",F="_active_1ktq6_37",G="_products_1ktq6_44",H="_product_1ktq6_44",J="_desc_1ktq6_73",K="_name_1ktq6_77",Q="_code_1ktq6_85",V="_loadMoreWrapper_1ktq6_91",X="_loadMore_1ktq6_91",t={filterBar:D,typeTabs:U,typeButton:Z,active:F,products:G,product:H,desc:J,name:K,code:Q,loadMoreWrapper:V,loadMore:X},Y="_customSelectWrapper_h7jax_1",ee="_label_h7jax_7",se="_customSelect_h7jax_1",te="_selected_h7jax_17",ce="_icon_h7jax_31",oe="_options_h7jax_34",ae="_option_h7jax_34",le="_active_h7jax_51",r={customSelectWrapper:Y,label:ee,customSelect:se,selected:te,icon:ce,options:oe,option:ae,active:le};function ne({options:h,value:d,onChange:u,placeholder:x,label:_,icon:a}){const[p,n]=o.useState(!1),i=o.useRef(null);return o.useEffect(()=>{const c=j=>{i.current&&!i.current.contains(j.target)&&n(!1)};return document.addEventListener("mousedown",c),()=>document.removeEventListener("mousedown",c)},[]),e.jsxs("div",{className:r.customSelectWrapper,children:[_&&e.jsx("label",{className:r.label,children:_}),e.jsxs("div",{className:r.customSelect,ref:i,children:[e.jsxs("div",{className:r.selected,onClick:()=>n(!p),children:[a&&e.jsx(a,{className:r.icon}),e.jsx("span",{children:d||x||"Select"}),p?e.jsx(R,{size:16}):e.jsx(O,{size:16})]}),p&&e.jsx("ul",{className:r.options,children:h.map(c=>e.jsx("li",{className:`${r.option} ${c===d?r.active:""}`,onClick:()=>{u(c),n(!1)},children:c},c))})]})]})}const N={tile:["All sizes","17x120x1,2","20x120x1,2","35x120x2","40x40x1,6","60x60","80x80x1,2","80x120","80x160x0,9","100x100x1","120x120x0,9"],slab:["All sizes","120x240x0,9","120x260x0,9","120x300x0,9","150x150x0,9","150x300x0,9"]},re=[{value:"all",label:"All"},{value:"tile",label:"Tiles"},{value:"slab",label:"Slabs"}],S=8;function ie(){const{t:h}=T(),[d,u]=o.useState([]),[x,_]=o.useState(!0),[a,p]=o.useState("all"),[n,i]=o.useState("All sizes"),[c,j]=o.useState(1),[g,q]=o.useState(!0),C=$(),z=s=>{C(`/products/${s}`)},b=async(s,m,f=1,E=!1)=>{_(!0);try{let l=W.from("products").select("*");s!=="all"&&(l=l.eq("type",s)),m&&m!=="All sizes"&&(l=l.eq("size",m));const B=(f-1)*S,L=f*S-1;l=l.range(B,L);const{data:v,error:k}=await l;if(k)throw k;u(E?P=>[...P,...v||[]]:v||[]),q(v&&v.length===S)}catch(l){console.error(l),u([])}finally{_(!1)}};o.useEffect(()=>{j(1),b(a,n,1,!1)},[a,n]);const M=()=>{const s=c+1;j(s),b(a,n,s,!0)};return x&&c===1?e.jsx(w,{}):e.jsxs("div",{className:t.wrapper,children:[e.jsxs("div",{className:t.filterBar,children:[e.jsx("div",{className:t.typeTabs,children:re.map(s=>e.jsx("button",{className:`${t.typeButton} ${a===s.value?t.active:""}`,onClick:()=>{p(s.value),i("All sizes")},children:h(s.label)},s.value))}),e.jsx(ne,{label:"Фильтр по размеру:",options:a==="all"?[...N.tile,...N.slab].filter((s,m,f)=>f.indexOf(s)===m):N[a],value:h(n),onChange:s=>i(s),placeholder:"Select size"})]}),e.jsx("div",{className:t.products,children:d.length>0?d.map(s=>e.jsxs("div",{className:t.product,onClick:()=>z(s.id),children:[e.jsx("img",{src:s.image,alt:s.title}),e.jsxs("div",{className:t.desc,children:[e.jsx("p",{className:t.name,children:s.title}),e.jsx("p",{className:t.code,children:s.code}),e.jsxs("p",{className:t.size,children:[s.size,"cm"]})]})]},s.id)):e.jsx("p",{className:t.noResults,children:"No products found for this type/size."})}),g&&!x&&e.jsx("div",{className:t.loadMoreWrapper,children:e.jsx("button",{className:t.loadMore,onClick:M,children:"Load More"})}),x&&c>1&&e.jsx("p",{children:"Loading more..."})]})}const de="_root_16seb_1",ue={root:de},pe=()=>e.jsx("div",{className:ue.root,children:e.jsx(ie,{})});export{pe as default};
